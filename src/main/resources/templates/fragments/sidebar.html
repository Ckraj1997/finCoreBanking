<!doctype html>
<html
    xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
    <body>
        <div th:fragment="sidebar" class="sidebar">
            <a
                th:href="@{/dashboard}"
                th:classappend="${currentUri == '/dashboard'} ? 'active'"
            >
                <i class="bi bi-speedometer2 me-2"></i> <span>Dashboard</span>
            </a>

            <div sec:authorize="hasAnyRole('ROLE_CUSTOMER', 'ROLE_CORPORATE')">
                <div class="sidebar-section">Banking</div>
                <a
                    th:href="@{/accounts}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/accounts')} ? 'active'"
                >
                    <i class="bi bi-wallet2 me-2"></i> <span>Accounts</span>
                </a>
                <a
                    th:href="@{/transactions}"
                    th:classappend="${currentUri == '/transactions'} ? 'active'"
                >
                    <i class="bi bi-arrow-left-right me-2"></i>
                    <span>Transactions</span>
                </a>
                <a
                    th:href="@{/transactions/transfer}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/transactions/transfer')} ? 'active'"
                >
                    <i class="bi bi-send me-2"></i> <span>Fund Transfer</span>
                </a>
                <a
                    th:href="@{/beneficiaries}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/beneficiaries')} ? 'active'"
                >
                    <i class="bi bi-people me-2"></i> <span>Beneficiaries</span>
                </a>
                <a
                    th:href="@{/investments}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/investments')} ? 'active'"
                >
                    <i class="bi bi-graph-up-arrow me-2"></i>
                    <span>Investments</span>
                </a>
                <a
                    th:href="@{/loans}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/loans')} ? 'active'"
                >
                    <i class="bi bi-cash-coin me-2"></i> <span>Loans</span>
                </a>
                <div class="sidebar-section">Services</div>
                <a
                    th:href="@{/kyc}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/kyc')} ? 'active'"
                >
                    <i class="bi bi-person-badge me-2"></i>
                    <span>KYC Update</span>
                </a>
                <a
                    th:href="@{/services}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/services')} ? 'active'"
                >
                    <i class="bi bi-credit-card-2-front me-2"></i>
                    <span>Cards & Cheques</span>
                </a>
                <a
                    th:href="@{/reports/statement}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/reports')} ? 'active'"
                >
                    <i class="bi bi-file-earmark-text me-2"></i>
                    <span>Statements</span>
                </a>
            </div>

            <div sec:authorize="hasRole('ROLE_TELLER')">
                <div class="sidebar-section">Counter Operations</div>
                <a
                    th:href="@{/teller}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/teller')} ? 'active'"
                >
                    <i class="bi bi-bank2 me-2"></i> <span>Cash Counter</span>
                </a>
                <a
                    th:href="@{/teller/history}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/teller/history')} ? 'active'"
                >
                    <i class="bi bi-clock-history me-2"></i>
                    <span>My Transaction Log</span>
                </a>
            </div>

            <div sec:authorize="hasRole('ROLE_MANAGER')">
                <div class="sidebar-section">Approvals</div>
                <a
                    th:href="@{/manager/approvals}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/manager/approvals')} ? 'active'"
                >
                    <i class="bi bi-check2-circle me-2"></i>
                    <span>Pending Requests</span>
                </a>

                <a th:href="@{/manager/customers/create}" 
                   th:classappend="${currentUri == '/manager/customers/create'} ? 'active'">
                    <i class="bi bi-person-plus-fill me-2"></i> <span>Onboard Customer</span>
                </a>

                <a th:href="@{/manager/users}" th:classappend="${currentUri != null and currentUri.startsWith('/manager/users')} ? 'active'">
                    <i class="bi bi-people-fill me-2"></i> <span>Customer Search</span>
                </a>
                <a
                    th:href="@{/manager/accounts}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/manager/accounts')} ? 'active'"
                >
                    <i class="bi bi-wallet2 me-2"></i>
                    <span>Approve Accounts</span>
                </a>
                <a
                    th:href="@{/manager/loans}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/manager/loans')} ? 'active'"
                >
                    <i class="bi bi-cash-coin me-2"></i>
                    <span>Disburse Loans</span>
                </a>
                <a
                    th:href="@{/manager/kyc}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/manager/kyc')} ? 'active'"
                >
                    <i class="bi bi-person-badge me-2"></i>
                    <span>Verify KYC</span>
                </a>

                <div class="sidebar-section">Branch Management</div>
                <a
                    th:href="@{/manager/users}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/manager/users')} ? 'active'"
                >
                    <i class="bi bi-people-fill me-2"></i>
                    <span>Customer Search</span>
                </a>
                <a
                    th:href="@{/manager/reports}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/manager/reports')} ? 'active'"
                >
                    <i class="bi bi-bar-chart-line me-2"></i>
                    <span>Branch Reports</span>
                </a>
            </div>

            <div sec:authorize="hasRole('ROLE_ADMIN')">
                <div class="sidebar-section">User Administration</div>
                <a
                    th:href="@{/admin/users}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/admin/users')} ? 'active'"
                >
                    <i class="bi bi-people-fill me-2"></i>
                    <span>Manage Users</span>
                </a>
                <a
                    th:href="@{/admin/register}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/admin/register')} ? 'active'"
                >
                    <i class="bi bi-person-plus me-2"></i>
                    <span>Onboard Staff</span>
                </a>

                <div class="sidebar-section">System Config</div>
                <a
                    th:href="@{/admin/loan-types}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/admin/loan-types')} ? 'active'"
                >
                    <i class="bi bi-percent me-2"></i>
                    <span>Loan Interest Rates</span>
                </a>
            </div>

            <div sec:authorize="hasAnyRole('ROLE_COMPLIANCE', 'ROLE_AUDITOR')">
                <div class="sidebar-section">Oversight</div>
                <a
                    th:href="@{/compliance/audit/logs}"
                    th:classappend="${currentUri != null and currentUri.contains('/audit')}"
                >
                    <i class="bi bi-journal-text me-2"></i>
                    <span>System Audit Logs</span>
                </a>
                <a
                    th:href="@{/compliance/reports/fraud}"
                    th:classappend="${currentUri != null and currentUri.contains('/fraud')}"
                >
                    <i class="bi bi-shield-exclamation me-2"></i>
                    <span>Fraud & Enforcement</span>
                </a>
            </div>

            <div sec:authorize="hasRole('ROLE_SUPER_ADMIN')">
                <div class="sidebar-section">Infrastructure</div>
                <a
                    th:href="@{/super-admin}"
                    th:classappend="${currentUri == '/super-admin'} ? 'active'"
                >
                    <i class="bi bi-cpu me-2"></i> <span>System Status</span>
                </a>
                <a
                    th:href="@{/super-admin/sql}"
                    th:classappend="${currentUri != null and currentUri.startsWith('/super-admin/sql')} ? 'active'"
                >
                    <i class="bi bi-database me-2"></i> <span>SQL Console</span>
                </a>
            </div>
        </div>
    </body>
</html>
