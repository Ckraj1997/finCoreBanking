<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
    <head th:replace="~{fragments/head :: head}"></head>

    <body>
        <div th:replace="~{fragments/navbar :: navbar}"></div>
        <div th:replace="~{fragments/sidebar :: sidebar}"></div>

        <div class="main-content">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h4 class="mb-0 text-primary">
                    <i class="bi bi-clock-history me-2"></i> Teller Transaction
                    Log
                </h4>
                <a th:href="@{/teller}" class="btn btn-outline-primary">
                    <i class="bi bi-arrow-left me-2"></i> Back to Counter
                </a>
               
            </div>

            <div class="card shadow-sm">
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover align-middle mb-0">
                            <thead class="table-light">
                                <tr>
                                    <th>Tx ID</th>
                                    <th>Time</th>
                                    <th>Type</th>
                                    <th>Account Number</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:each="tx : ${fullHistory}">
                                    <td class="text-muted small">
                                        #<span th:text="${tx.id}"></span>
                                    </td>
                                    <td
                                        th:text="${#temporals.format(tx.timestamp, 'dd-MMM-yyyy HH:mm')}"
                                    >
                                        Date
                                    </td>
                                    <td>
                                        <span
                                            class="badge"
                                            th:classappend="${tx.type == 'CASH_DEPOSIT'} ? 'bg-success-subtle text-success' : 'bg-danger-subtle text-danger'"
                                            th:text="${tx.type == 'CASH_DEPOSIT' ? 'DEPOSIT' : 'WITHDRAWAL'}"
                                            >TYPE</span
                                        >
                                    </td>
                                    <td
                                        class="fw-bold"
                                        th:text="${tx.targetAccount.accountNumber}"
                                    >
                                        ACC123
                                    </td>
                                    <td class="fw-bold">
                                        â‚¹
                                        <span
                                            th:text="${#numbers.formatDecimal(tx.amount, 0, 'COMMA', 2, 'POINT')}"
                                            >0.00</span
                                        >
                                    </td>
                                    <td>
                                        <span
                                            class="badge bg-light text-dark border"
                                            >COMPLETED</span
                                        >
                                         <a
                    th:href="@{'/teller/transaction/' + ${tx.id} + '/receipt'}"
                    class="btn btn-sm btn-outline-primary"
                >
                    <i class="bi bi-receipt"></i> Receipt
                </a>
                                    </td>
                                </tr>
                                <tr th:if="${#lists.isEmpty(fullHistory)}">
                                    <td
                                        colspan="6"
                                        class="text-center py-5 text-muted"
                                    >
                                        <i
                                            class="bi bi-journal-x fs-1 d-block mb-3"
                                        ></i>
                                        No transactions found in your log.
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <script th:src="@{/js/app.js}"></script>
    </body>
</html>
